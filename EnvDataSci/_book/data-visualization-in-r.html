<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 4 Data visualization in R | Introduction to Environmental Data Science</title>
  <meta name="description" content="“ENVST 325: Environmental Data Science, Hamilton College”" />
  <meta name="generator" content="bookdown 0.40 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 4 Data visualization in R | Introduction to Environmental Data Science" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="“ENVST 325: Environmental Data Science, Hamilton College”" />
  <meta name="github-repo" content="kroppheather/Intro_EnvDataSci" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 4 Data visualization in R | Introduction to Environmental Data Science" />
  
  <meta name="twitter:description" content="“ENVST 325: Environmental Data Science, Hamilton College”" />
  

<meta name="author" content="Heather Kropp" />


<meta name="date" content="2024-01-01" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="the-data-deluge-data-wrangling-in-r.html"/>

<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>1</b> Introduction</a>
<ul>
<li class="chapter" data-level="1.1" data-path="introduction.html"><a href="introduction.html#course-learning-objectives"><i class="fa fa-check"></i><b>1.1</b> Course Learning objectives</a></li>
<li class="chapter" data-level="1.2" data-path="introduction.html"><a href="introduction.html#license"><i class="fa fa-check"></i><b>1.2</b> License</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="introduction-to-r-statistical-software-and-git.html"><a href="introduction-to-r-statistical-software-and-git.html"><i class="fa fa-check"></i><b>2</b> Introduction to R Statistical Software and Git</a>
<ul>
<li class="chapter" data-level="2.1" data-path="introduction-to-r-statistical-software-and-git.html"><a href="introduction-to-r-statistical-software-and-git.html#learning-objectives"><i class="fa fa-check"></i><b>2.1</b> Learning objectives</a></li>
<li class="chapter" data-level="2.2" data-path="introduction-to-r-statistical-software-and-git.html"><a href="introduction-to-r-statistical-software-and-git.html#new-functions-syntax"><i class="fa fa-check"></i><b>2.2</b> New functions &amp; syntax</a></li>
<li class="chapter" data-level="2.3" data-path="introduction-to-r-statistical-software-and-git.html"><a href="introduction-to-r-statistical-software-and-git.html#first-some-terms"><i class="fa fa-check"></i><b>2.3</b> First some terms:</a></li>
<li class="chapter" data-level="2.4" data-path="introduction-to-r-statistical-software-and-git.html"><a href="introduction-to-r-statistical-software-and-git.html#setting-up-a-repository-in-github"><i class="fa fa-check"></i><b>2.4</b> Setting up a Repository in GitHub</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="introduction-to-r-statistical-software-and-git.html"><a href="introduction-to-r-statistical-software-and-git.html#create-a-repository"><i class="fa fa-check"></i><b>2.4.1</b> <em>Create a repository</em></a></li>
<li class="chapter" data-level="2.4.2" data-path="introduction-to-r-statistical-software-and-git.html"><a href="introduction-to-r-statistical-software-and-git.html#create-a-personal-token-for-rstudio-cloud"><i class="fa fa-check"></i><b>2.4.2</b> <em>Create a personal token for Rstudio Cloud</em></a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="introduction-to-r-statistical-software-and-git.html"><a href="introduction-to-r-statistical-software-and-git.html#start-a-project-with-version-control-in-rstudio-cloud"><i class="fa fa-check"></i><b>2.5</b> Start a project with version control in Rstudio Cloud</a>
<ul>
<li class="chapter" data-level="2.5.1" data-path="introduction-to-r-statistical-software-and-git.html"><a href="introduction-to-r-statistical-software-and-git.html#start-a-project-linked-with-a-repository"><i class="fa fa-check"></i><b>2.5.1</b> <em>Start a project linked with a repository</em></a></li>
<li class="chapter" data-level="2.5.2" data-path="introduction-to-r-statistical-software-and-git.html"><a href="introduction-to-r-statistical-software-and-git.html#rstudio-interface"><i class="fa fa-check"></i><b>2.5.2</b> <em>Rstudio interface</em></a></li>
<li class="chapter" data-level="2.5.3" data-path="introduction-to-r-statistical-software-and-git.html"><a href="introduction-to-r-statistical-software-and-git.html#version-control"><i class="fa fa-check"></i><b>2.5.3</b> <em>Version control</em></a></li>
<li class="chapter" data-level="2.5.4" data-path="introduction-to-r-statistical-software-and-git.html"><a href="introduction-to-r-statistical-software-and-git.html#commit-your-first-changes-to-github"><i class="fa fa-check"></i><b>2.5.4</b> <em>Commit your first changes to GitHub</em></a></li>
</ul></li>
<li class="chapter" data-level="2.6" data-path="introduction-to-r-statistical-software-and-git.html"><a href="introduction-to-r-statistical-software-and-git.html#introrefresher-on-r"><i class="fa fa-check"></i><b>2.6</b> Intro/Refresher on R</a></li>
<li class="chapter" data-level="2.7" data-path="introduction-to-r-statistical-software-and-git.html"><a href="introduction-to-r-statistical-software-and-git.html#variables"><i class="fa fa-check"></i><b>2.7</b> Variables</a>
<ul>
<li class="chapter" data-level="2.7.1" data-path="introduction-to-r-statistical-software-and-git.html"><a href="introduction-to-r-statistical-software-and-git.html#vectors"><i class="fa fa-check"></i><b>2.7.1</b> <em>Vectors</em></a></li>
<li class="chapter" data-level="2.7.2" data-path="introduction-to-r-statistical-software-and-git.html"><a href="introduction-to-r-statistical-software-and-git.html#data-frames"><i class="fa fa-check"></i><b>2.7.2</b> <em>Data frames</em></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="the-data-deluge-data-wrangling-in-r.html"><a href="the-data-deluge-data-wrangling-in-r.html"><i class="fa fa-check"></i><b>3</b> The data deluge: data wrangling in R</a>
<ul>
<li class="chapter" data-level="3.1" data-path="the-data-deluge-data-wrangling-in-r.html"><a href="the-data-deluge-data-wrangling-in-r.html#learning-objectives-1"><i class="fa fa-check"></i><b>3.1</b> Learning objectives</a></li>
<li class="chapter" data-level="3.2" data-path="the-data-deluge-data-wrangling-in-r.html"><a href="the-data-deluge-data-wrangling-in-r.html#new-functions-syntax-1"><i class="fa fa-check"></i><b>3.2</b> New functions &amp; syntax</a></li>
<li class="chapter" data-level="3.3" data-path="the-data-deluge-data-wrangling-in-r.html"><a href="the-data-deluge-data-wrangling-in-r.html#the-problem"><i class="fa fa-check"></i><b>3.3</b> The problem:</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="the-data-deluge-data-wrangling-in-r.html"><a href="the-data-deluge-data-wrangling-in-r.html#flooding-and-natural-disasters"><i class="fa fa-check"></i><b>3.3.1</b> <em>Flooding and natural disasters</em></a></li>
<li class="chapter" data-level="3.3.2" data-path="the-data-deluge-data-wrangling-in-r.html"><a href="the-data-deluge-data-wrangling-in-r.html#the-data-flood-stage-stream-guage-height"><i class="fa fa-check"></i><b>3.3.2</b> <em>The data: flood stage &amp; stream guage height</em></a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="the-data-deluge-data-wrangling-in-r.html"><a href="the-data-deluge-data-wrangling-in-r.html#the-approach-packages-in-r"><i class="fa fa-check"></i><b>3.4</b> The approach: packages in R</a>
<ul>
<li class="chapter" data-level="3.4.1" data-path="the-data-deluge-data-wrangling-in-r.html"><a href="the-data-deluge-data-wrangling-in-r.html#installing-packages"><i class="fa fa-check"></i><b>3.4.1</b> <em>Installing packages</em></a></li>
<li class="chapter" data-level="3.4.2" data-path="the-data-deluge-data-wrangling-in-r.html"><a href="the-data-deluge-data-wrangling-in-r.html#loading-packages"><i class="fa fa-check"></i><b>3.4.2</b> <em>Loading packages</em></a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="the-data-deluge-data-wrangling-in-r.html"><a href="the-data-deluge-data-wrangling-in-r.html#the-approach-data-wrangling"><i class="fa fa-check"></i><b>3.5</b> The approach: data wrangling</a>
<ul>
<li class="chapter" data-level="3.5.1" data-path="the-data-deluge-data-wrangling-in-r.html"><a href="the-data-deluge-data-wrangling-in-r.html#reading-in-data"><i class="fa fa-check"></i><b>3.5.1</b> <em>Reading in data</em></a></li>
<li class="chapter" data-level="3.5.2" data-path="the-data-deluge-data-wrangling-in-r.html"><a href="the-data-deluge-data-wrangling-in-r.html#parsing-datetime"><i class="fa fa-check"></i><b>3.5.2</b> <em>Parsing date/time</em></a></li>
<li class="chapter" data-level="3.5.3" data-path="the-data-deluge-data-wrangling-in-r.html"><a href="the-data-deluge-data-wrangling-in-r.html#extracting-information-from-dates"><i class="fa fa-check"></i><b>3.5.3</b> <em>Extracting information from dates</em></a></li>
</ul></li>
<li class="chapter" data-level="3.6" data-path="the-data-deluge-data-wrangling-in-r.html"><a href="the-data-deluge-data-wrangling-in-r.html#basic-subsetting"><i class="fa fa-check"></i><b>3.6</b> <em>Basic subsetting</em></a>
<ul>
<li class="chapter" data-level="3.6.1" data-path="the-data-deluge-data-wrangling-in-r.html"><a href="the-data-deluge-data-wrangling-in-r.html#basic-plotting"><i class="fa fa-check"></i><b>3.6.1</b> <em>Basic plotting</em></a></li>
<li class="chapter" data-level="3.6.2" data-path="the-data-deluge-data-wrangling-in-r.html"><a href="the-data-deluge-data-wrangling-in-r.html#joining-data-tables-with-a-common-feature"><i class="fa fa-check"></i><b>3.6.2</b> <em>Joining data tables with a common feature</em></a></li>
<li class="chapter" data-level="3.6.3" data-path="the-data-deluge-data-wrangling-in-r.html"><a href="the-data-deluge-data-wrangling-in-r.html#aggregating-data-chaining-functions"><i class="fa fa-check"></i><b>3.6.3</b> <em>Aggregating data &amp; chaining functions</em></a></li>
<li class="chapter" data-level="3.6.4" data-path="the-data-deluge-data-wrangling-in-r.html"><a href="the-data-deluge-data-wrangling-in-r.html#filtering-data"><i class="fa fa-check"></i><b>3.6.4</b> <em>Filtering data</em></a></li>
</ul></li>
<li class="chapter" data-level="3.7" data-path="the-data-deluge-data-wrangling-in-r.html"><a href="the-data-deluge-data-wrangling-in-r.html#citations"><i class="fa fa-check"></i><b>3.7</b> Citations</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="data-visualization-in-r.html"><a href="data-visualization-in-r.html"><i class="fa fa-check"></i><b>4</b> Data visualization in R</a>
<ul>
<li class="chapter" data-level="4.1" data-path="data-visualization-in-r.html"><a href="data-visualization-in-r.html#learning-objectives-2"><i class="fa fa-check"></i><b>4.1</b> Learning objectives</a></li>
<li class="chapter" data-level="4.2" data-path="data-visualization-in-r.html"><a href="data-visualization-in-r.html#new-functions-syntax-2"><i class="fa fa-check"></i><b>4.2</b> New functions &amp; syntax</a></li>
<li class="chapter" data-level="4.3" data-path="data-visualization-in-r.html"><a href="data-visualization-in-r.html#the-problem-1"><i class="fa fa-check"></i><b>4.3</b> The problem:</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="data-visualization-in-r.html"><a href="data-visualization-in-r.html#communicating-about-climate-change"><i class="fa fa-check"></i><b>4.3.1</b> <em>Communicating about climate change</em></a></li>
<li class="chapter" data-level="4.3.2" data-path="data-visualization-in-r.html"><a href="data-visualization-in-r.html#the-data"><i class="fa fa-check"></i><b>4.3.2</b> <em>The data</em></a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="data-visualization-in-r.html"><a href="data-visualization-in-r.html#fundamentals-of-plotting-data"><i class="fa fa-check"></i><b>4.4</b> Fundamentals of plotting data</a>
<ul>
<li class="chapter" data-level="4.4.1" data-path="data-visualization-in-r.html"><a href="data-visualization-in-r.html#representation-of-data"><i class="fa fa-check"></i><b>4.4.1</b> <em>1. Representation of data</em></a></li>
<li class="chapter" data-level="4.4.2" data-path="data-visualization-in-r.html"><a href="data-visualization-in-r.html#layout"><i class="fa fa-check"></i><b>4.4.2</b> <em>2. Layout</em></a></li>
<li class="chapter" data-level="4.4.3" data-path="data-visualization-in-r.html"><a href="data-visualization-in-r.html#encoding"><i class="fa fa-check"></i><b>4.4.3</b> <em>3. Encoding</em></a></li>
<li class="chapter" data-level="4.4.4" data-path="data-visualization-in-r.html"><a href="data-visualization-in-r.html#simplicity"><i class="fa fa-check"></i><b>4.4.4</b> <em>4. Simplicity</em></a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="data-visualization-in-r.html"><a href="data-visualization-in-r.html#plotting-data-in-base-r"><i class="fa fa-check"></i><b>4.5</b> Plotting data in base R</a></li>
<li class="chapter" data-level="4.6" data-path="data-visualization-in-r.html"><a href="data-visualization-in-r.html#plotting-in-ggplot2"><i class="fa fa-check"></i><b>4.6</b> Plotting in ggplot2</a>
<ul>
<li class="chapter" data-level="4.6.1" data-path="data-visualization-in-r.html"><a href="data-visualization-in-r.html#intro-to-ggplot"><i class="fa fa-check"></i><b>4.6.1</b> <em>Intro to ggplot</em></a></li>
<li class="chapter" data-level="4.6.2" data-path="data-visualization-in-r.html"><a href="data-visualization-in-r.html#changing-colors"><i class="fa fa-check"></i><b>4.6.2</b> <em>Changing colors</em></a></li>
<li class="chapter" data-level="4.6.3" data-path="data-visualization-in-r.html"><a href="data-visualization-in-r.html#exploring-different-visualizations-in-ggplot2"><i class="fa fa-check"></i><b>4.6.3</b> Exploring different visualizations in ggplot2</a></li>
<li class="chapter" data-level="4.6.4" data-path="data-visualization-in-r.html"><a href="data-visualization-in-r.html#violin-and-box-plots"><i class="fa fa-check"></i><b>4.6.4</b> <em>Violin and box plots</em></a></li>
<li class="chapter" data-level="4.6.5" data-path="data-visualization-in-r.html"><a href="data-visualization-in-r.html#area-and-ribbon-plots"><i class="fa fa-check"></i><b>4.6.5</b> <em>Area and ribbon plots</em></a></li>
<li class="chapter" data-level="4.6.6" data-path="data-visualization-in-r.html"><a href="data-visualization-in-r.html#labels"><i class="fa fa-check"></i><b>4.6.6</b> <em>Labels</em></a></li>
</ul></li>
<li class="chapter" data-level="4.7" data-path="data-visualization-in-r.html"><a href="data-visualization-in-r.html#conclusions"><i class="fa fa-check"></i><b>4.7</b> Conclusions</a></li>
<li class="chapter" data-level="4.8" data-path="data-visualization-in-r.html"><a href="data-visualization-in-r.html#citations-1"><i class="fa fa-check"></i><b>4.8</b> Citations</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Introduction to Environmental Data Science</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="data-visualization-in-r" class="section level1 hasAnchor" number="4">
<h1><span class="header-section-number">Chapter 4</span> Data visualization in R<a href="data-visualization-in-r.html#data-visualization-in-r" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p><em>by Heather Kropp</em>
<em>for ENVST 325: Introduction to Environmental Data Science</em>
<em>Hamilton College</em></p>
<style type="text/css">
.book .book-body .page-wrapper .page-inner section.normal pre.colout {
  background-color: #D9EDF7;
}
</style>
<div id="learning-objectives-2" class="section level2 hasAnchor" number="4.1">
<h2><span class="header-section-number">4.1</span> Learning objectives<a href="data-visualization-in-r.html#learning-objectives-2" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ol style="list-style-type: decimal">
<li><p>Fundamentals of plotting data</p></li>
<li><p>Plotting data in base R</p></li>
<li><p>Learn about different visualization techniques in <code>ggplot2</code></p></li>
<li><p>Create visualizations that illustrate observations around anthropogenic climate change</p></li>
</ol>
</div>
<div id="new-functions-syntax-2" class="section level2 hasAnchor" number="4.2">
<h2><span class="header-section-number">4.2</span> New functions &amp; syntax<a href="data-visualization-in-r.html#new-functions-syntax-2" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><code>plot</code>, <code>points</code>, <code>legend</code>,<code>ggplot</code>, <code>geom_point</code>,<code>geom_line</code>,<code>labs</code></p>
</div>
<div id="the-problem-1" class="section level2 hasAnchor" number="4.3">
<h2><span class="header-section-number">4.3</span> The problem:<a href="data-visualization-in-r.html#the-problem-1" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="communicating-about-climate-change" class="section level3 hasAnchor" number="4.3.1">
<h3><span class="header-section-number">4.3.1</span> <em>Communicating about climate change</em><a href="data-visualization-in-r.html#communicating-about-climate-change" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Visualizations provide the opportunity to engage and communicate patterns in data to a wide range of audiences. With COVID-19, the term “flatten the curve” became a ubiquitous phrase in early lock down and the public discourse focused on examining increases and decreases in the non-linear peaks in graphs of daily COVID-19 cases. This type of fixation on graphical data during a crisis is hardly a new concept. Meteorologist &amp; climatologist Jerry D. Mahlman popularized the term <strong>hockey stick graph</strong> in the early 2000s based on the Mann &amp; Bradley reconstruction of global temperatures from the years 1000-1998.</p>
<center>
<p><img src="/Users/hkropp/Documents/GitHub/EnviroDataSci/tutorials/tutorial03/pics/hockey_stick.png" style="width:50.0%" /></p>
<p><em>Source: Mann &amp; Bradley, 1999 Geophysical Research Letters Figure 1a.</em></p>
</center>
<p>The hockey stick pattern in global temperatures was widely reported in popular media and for the Intergovernmental Panel on Climate Change. The graph helped illustrate the unprecedented change in global air temperatures that was coinciding with higher CO<sub>2</sub> levels and rising fossil fuel emissions.</p>
</div>
<div id="the-data" class="section level3 hasAnchor" number="4.3.2">
<h3><span class="header-section-number">4.3.2</span> <em>The data</em><a href="data-visualization-in-r.html#the-data" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><a href="https://ourworldindata.org/">Our world in data</a> is an organization that focuses on visualizing and sharing data relevant for a range of global issues related to climate change, pollution, poverty, and human health in order to make data and knowledge accessable. Data from researchers and organizations is compiled and visualized with the availability to download the underlying data in every graphic.</p>
<center>
<p><img src="photos/tutorial03/example_data.png" style="width:66.0%" /></p>
<p><em>Source: <a href="https://ourworldindata.org/grapher/annual-co-emissions-by-region">Greenhouse Gas Emissions</a> from Our World in data</em></p>
</center>
<p>In this exercise, you will work on data from Our World In Data. You will practice visualizing CO<sub>2</sub> emissions from fossil fuels over time to track the anthropogenic driver of climate change in the tutorial. You will explore other data in your homework related to climate change and the environment.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="data-visualization-in-r.html#cb1-1" tabindex="-1"></a><span class="co"># read in data</span></span>
<span id="cb1-2"><a href="data-visualization-in-r.html#cb1-2" tabindex="-1"></a><span class="co"># cloud is always lowercase</span></span>
<span id="cb1-3"><a href="data-visualization-in-r.html#cb1-3" tabindex="-1"></a>datCO2 <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;/cloud/project/activity03/annual-co-emissions-by-region.csv&quot;</span>)</span></code></pre></div>
<pre class="colout"><code>       Entity Code Year Annual.CO2.emissions..zero.filled.
1 Afghanistan  AFG 1750                                  0
2 Afghanistan  AFG 1751                                  0
3 Afghanistan  AFG 1752                                  0
4 Afghanistan  AFG 1753                                  0
5 Afghanistan  AFG 1754                                  0
6 Afghanistan  AFG 1755                                  0</code></pre>
<p>Here <code>Entity</code> is the country, <code>Year</code> is the annual emissions and <code>Annual.CO2.emissions..zero.filled.</code> is the CO<sub>2</sub> emitted from fossil fuels in tons. Before getting started, it will be helpful to change this column name so that you don’t have to continuously worry about typing it. You can check the names of each column using the function <code>colnames</code>. You can rename a column name by using the function to the left of the <code>&lt;-</code>.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="data-visualization-in-r.html#cb3-1" tabindex="-1"></a><span class="co"># check column names</span></span>
<span id="cb3-2"><a href="data-visualization-in-r.html#cb3-2" tabindex="-1"></a><span class="fu">colnames</span>(datCO2)</span></code></pre></div>
<pre class="colout"><code>[1] &quot;Entity&quot;                             &quot;Code&quot;                              
[3] &quot;Year&quot;                               &quot;Annual.CO2.emissions..zero.filled.&quot;</code></pre>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="data-visualization-in-r.html#cb5-1" tabindex="-1"></a><span class="co"># change the 4 column name</span></span>
<span id="cb5-2"><a href="data-visualization-in-r.html#cb5-2" tabindex="-1"></a><span class="fu">colnames</span>(datCO2)[<span class="dv">4</span>] <span class="ot">&lt;-</span> <span class="st">&quot;CO2&quot;</span></span>
<span id="cb5-3"><a href="data-visualization-in-r.html#cb5-3" tabindex="-1"></a><span class="co"># check names again</span></span>
<span id="cb5-4"><a href="data-visualization-in-r.html#cb5-4" tabindex="-1"></a><span class="fu">colnames</span>(datCO2)</span></code></pre></div>
<pre class="colout"><code>[1] &quot;Entity&quot; &quot;Code&quot;   &quot;Year&quot;   &quot;CO2&quot;   </code></pre>
<p>This new column name will be much easier to refer to. It will also be helpful to convert the entity names to a factor:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="data-visualization-in-r.html#cb7-1" tabindex="-1"></a><span class="co"># convert the entity names to factor and store a variable with levels for</span></span>
<span id="cb7-2"><a href="data-visualization-in-r.html#cb7-2" tabindex="-1"></a><span class="co"># easy reference</span></span>
<span id="cb7-3"><a href="data-visualization-in-r.html#cb7-3" tabindex="-1"></a>datCO2<span class="sc">$</span>Entity <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(datCO2<span class="sc">$</span>Entity)</span>
<span id="cb7-4"><a href="data-visualization-in-r.html#cb7-4" tabindex="-1"></a><span class="co"># make a vector of all levels</span></span>
<span id="cb7-5"><a href="data-visualization-in-r.html#cb7-5" tabindex="-1"></a>name.Ent <span class="ot">&lt;-</span> <span class="fu">levels</span>(datCO2<span class="sc">$</span>Entity)</span></code></pre></div>
<p>You can run the name of the vector to view all countries/territories in the data:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="data-visualization-in-r.html#cb8-1" tabindex="-1"></a>name.Ent</span></code></pre></div>
</div>
</div>
<div id="fundamentals-of-plotting-data" class="section level2 hasAnchor" number="4.4">
<h2><span class="header-section-number">4.4</span> Fundamentals of plotting data<a href="data-visualization-in-r.html#fundamentals-of-plotting-data" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Visualizing data requires careful consideration of the audience and representation of the data. Many aesthetics and graphic design principles can aid in making engaging and accurate visualizations. There are several main principles to consider in visualizing data:</p>
<div id="representation-of-data" class="section level3 hasAnchor" number="4.4.1">
<h3><span class="header-section-number">4.4.1</span> <em>1. Representation of data</em><a href="data-visualization-in-r.html#representation-of-data" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The representation of data will depend on the type of data (categorical, discrete, proportion, numerical, etc.) and the uncertainty associated with the data. Keep in mind, uncertainty may be related to measurement error or simply showing the variation or spread of the data . Typically the type of data influences the type of graph that can be used. Below are a few examples of the underlying representation of data and associated error or variation.</p>
<p><img src="EnvDataSci_files/figure-html/unnamed-chunk-10-1.png" width="960" /></p>
<p>The choice in plot will depend on the representing uncertainty or variation (error bars, quantile boxplot), independence or ordering of variables (line versus scatter), and categorical versus numerical data (barplot, mosaic, pie).</p>
</div>
<div id="layout" class="section level3 hasAnchor" number="4.4.2">
<h3><span class="header-section-number">4.4.2</span> <em>2. Layout</em><a href="data-visualization-in-r.html#layout" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The layout describes all of the features and arrangement of the graph including labeling, axes range, the main graph frame. The objects included for both labeling and the physical centering and balance of the elements can all fall under layout.</p>
<center>
<p><img src="EnvDataSci_files/figure-html/unnamed-chunk-11-1.png" width="672" /></p>
</center>
</div>
<div id="encoding" class="section level3 hasAnchor" number="4.4.3">
<h3><span class="header-section-number">4.4.3</span> <em>3. Encoding</em><a href="data-visualization-in-r.html#encoding" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Encoding deals with the symbolization and representation of data. This can be related to colors, size of points or boxes, line weight, shading, or transparency. For encoding, you will want to consider aspects such as intuitive interpretation, accessibility, and cultural meaning.</p>
<center>
<img src="EnvDataSci_files/figure-html/unnamed-chunk-12-1.png" width="672" />
</center>
<p>In the above graph, colors are similar to the objects in the data and the point size represents large/small values. These types of intuitive encoding help with interpretation. However, for a broad audience, color-blind friendly and high contrast color may be more favorable over colors associated with objects or meaning. You will want to choose colors that will avoid confusion with other associations (like red colors for low values). You should also keep in mind that there are limitations in the number of hues that can be readily related to a number or object by most people. This means that encoding data via shading or hue can communicate general patterns for a large range of hue values, but does not offer the more accurate assessment that position or length can convey.</p>
</div>
<div id="simplicity" class="section level3 hasAnchor" number="4.4.4">
<h3><span class="header-section-number">4.4.4</span> <em>4. Simplicity</em><a href="data-visualization-in-r.html#simplicity" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Too many colors, crowded points, complex shapes, and overlapping text all hamper the interpretation of data. In many contexts, there can be a lot of information to convey in a limited amount of space and audience attention span. Visualization often requires coordinating with text and the venue for the visualization to narrow in on the main focus and key takeaways from the visualization. Effective titles and labels can also play a role in visualization.</p>
</div>
</div>
<div id="plotting-data-in-base-r" class="section level2 hasAnchor" number="4.5">
<h2><span class="header-section-number">4.5</span> Plotting data in base R<a href="data-visualization-in-r.html#plotting-data-in-base-r" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Base R can be a powerful tool for making highly customized visualization. However, the very simple forms of graphs in base R will often have a lot of characteristics that are not as aesthetically pleasing or do not follow traditional conventions to make graphs easily readable. Base R can often require many lines of code to get a professional quality graph, but it is also highly flexible. Let’s look at a simple example with the CO2 emissions data and year:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="data-visualization-in-r.html#cb9-1" tabindex="-1"></a><span class="fu">plot</span>(datCO2<span class="sc">$</span>Year, datCO2<span class="sc">$</span>CO2)</span></code></pre></div>
<p><img src="EnvDataSci_files/figure-html/unnamed-chunk-13-1.png" width="672" /></p>
<p>This is not an acceptable visualization. My axes labels are not informative, I can see a lot of data from different countries, but none of that information is encoded. The open points are difficult to read. In order to get more familiar with plotting, let’s start by looking at just the United States and Mexico. Let’s make two new data frames:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="data-visualization-in-r.html#cb10-1" tabindex="-1"></a><span class="co"># new data frame for US</span></span>
<span id="cb10-2"><a href="data-visualization-in-r.html#cb10-2" tabindex="-1"></a>US <span class="ot">&lt;-</span> datCO2[datCO2<span class="sc">$</span>Entity <span class="sc">==</span> <span class="st">&quot;United States&quot;</span>,]</span>
<span id="cb10-3"><a href="data-visualization-in-r.html#cb10-3" tabindex="-1"></a><span class="co"># new data frame for Mexico</span></span>
<span id="cb10-4"><a href="data-visualization-in-r.html#cb10-4" tabindex="-1"></a>ME <span class="ot">&lt;-</span> datCO2[datCO2<span class="sc">$</span>Entity <span class="sc">==</span> <span class="st">&quot;Mexico&quot;</span>,]</span></code></pre></div>
<p>In base R, you will have to work to add different colors or shapes to points to encode for differences in country. You will have to add each country to a plot seperately. Let’s start with the US:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="data-visualization-in-r.html#cb11-1" tabindex="-1"></a><span class="co"># make a plot of US CO2</span></span>
<span id="cb11-2"><a href="data-visualization-in-r.html#cb11-2" tabindex="-1"></a><span class="fu">plot</span>(US<span class="sc">$</span>Year, <span class="co"># x data</span></span>
<span id="cb11-3"><a href="data-visualization-in-r.html#cb11-3" tabindex="-1"></a>     US<span class="sc">$</span>CO2, <span class="co"># y data</span></span>
<span id="cb11-4"><a href="data-visualization-in-r.html#cb11-4" tabindex="-1"></a>     <span class="at">type =</span> <span class="st">&quot;b&quot;</span>, <span class="co">#b = points and lines</span></span>
<span id="cb11-5"><a href="data-visualization-in-r.html#cb11-5" tabindex="-1"></a>     <span class="at">pch =</span> <span class="dv">19</span>, <span class="co"># symbol shape</span></span>
<span id="cb11-6"><a href="data-visualization-in-r.html#cb11-6" tabindex="-1"></a>     <span class="at">ylab =</span> <span class="st">&quot;Annual fossil fuel emissions (tons CO2)&quot;</span>, <span class="co">#y axis label</span></span>
<span id="cb11-7"><a href="data-visualization-in-r.html#cb11-7" tabindex="-1"></a>     <span class="at">xlab =</span> <span class="st">&quot;Year&quot;</span>) <span class="co">#x axis label</span></span></code></pre></div>
<p><img src="EnvDataSci_files/figure-html/unnamed-chunk-15-1.png" width="672" /></p>
<p>You’ll also note that some of the y axis ticks are cut off because the plot window is too small and the labels are flipped in a hard to read direction. R doesn’t offer a lot of axes arguments within the plot function, but we can turn them off and add them separately with the <code>axis</code> function. You can turn all axes off in plot using the <code>axes=FALSE</code> argument or individual axis off. In this case, the x axis looks good so need to change it. <code>yaxt = "n"</code> turns off just the y axis. The axis function allows you to specify where ticks go and what label to use. It would be helpful to change our units to billons of tons rather than just tons to better read the graph.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="data-visualization-in-r.html#cb12-1" tabindex="-1"></a><span class="co"># make a plot of US CO2</span></span>
<span id="cb12-2"><a href="data-visualization-in-r.html#cb12-2" tabindex="-1"></a><span class="fu">plot</span>(US<span class="sc">$</span>Year, <span class="co"># x data</span></span>
<span id="cb12-3"><a href="data-visualization-in-r.html#cb12-3" tabindex="-1"></a>     US<span class="sc">$</span>CO2, <span class="co"># y data</span></span>
<span id="cb12-4"><a href="data-visualization-in-r.html#cb12-4" tabindex="-1"></a>     <span class="at">type =</span> <span class="st">&quot;b&quot;</span>, <span class="co">#b = points and lines</span></span>
<span id="cb12-5"><a href="data-visualization-in-r.html#cb12-5" tabindex="-1"></a>     <span class="at">pch =</span> <span class="dv">19</span>, <span class="co"># symbol shape</span></span>
<span id="cb12-6"><a href="data-visualization-in-r.html#cb12-6" tabindex="-1"></a>     <span class="at">ylab =</span> <span class="st">&quot;Annual fossil fuel emissions (billons of tons CO2)&quot;</span>, <span class="co">#y axis label</span></span>
<span id="cb12-7"><a href="data-visualization-in-r.html#cb12-7" tabindex="-1"></a>     <span class="at">xlab =</span> <span class="st">&quot;Year&quot;</span>, <span class="co">#x axis label</span></span>
<span id="cb12-8"><a href="data-visualization-in-r.html#cb12-8" tabindex="-1"></a>     <span class="at">yaxt =</span> <span class="st">&quot;n&quot;</span>) <span class="co"># turn off y axis</span></span>
<span id="cb12-9"><a href="data-visualization-in-r.html#cb12-9" tabindex="-1"></a><span class="co"># add y axis</span></span>
<span id="cb12-10"><a href="data-visualization-in-r.html#cb12-10" tabindex="-1"></a><span class="co"># arguments are axis number (1 bottom, 2 left, 3 top, 4 right)</span></span>
<span id="cb12-11"><a href="data-visualization-in-r.html#cb12-11" tabindex="-1"></a><span class="co"># las = 2 changes the labels to be read in horizontal direction</span></span>
<span id="cb12-12"><a href="data-visualization-in-r.html#cb12-12" tabindex="-1"></a><span class="fu">axis</span>(<span class="dv">2</span>, <span class="fu">seq</span>(<span class="dv">0</span>,<span class="dv">6000000000</span>, <span class="at">by=</span><span class="dv">2000000000</span>), <span class="co">#location of ticks</span></span>
<span id="cb12-13"><a href="data-visualization-in-r.html#cb12-13" tabindex="-1"></a>     <span class="fu">seq</span>(<span class="dv">0</span>,<span class="dv">6</span>, <span class="at">by =</span> <span class="dv">2</span>), <span class="co"># label for ticks</span></span>
<span id="cb12-14"><a href="data-visualization-in-r.html#cb12-14" tabindex="-1"></a>     <span class="at">las=</span><span class="dv">2</span> )</span></code></pre></div>
<p><img src="EnvDataSci_files/figure-html/unnamed-chunk-16-1.png" width="768" /></p>
<p>You can add additional points with any color or symbolization, and this is the easiest way to show multiple groups of data with different encoding.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="data-visualization-in-r.html#cb13-1" tabindex="-1"></a><span class="co"># make a plot of US CO2 ----</span></span>
<span id="cb13-2"><a href="data-visualization-in-r.html#cb13-2" tabindex="-1"></a></span>
<span id="cb13-3"><a href="data-visualization-in-r.html#cb13-3" tabindex="-1"></a><span class="fu">plot</span>(US<span class="sc">$</span>Year, <span class="co"># x data</span></span>
<span id="cb13-4"><a href="data-visualization-in-r.html#cb13-4" tabindex="-1"></a>     US<span class="sc">$</span>CO2, <span class="co"># y data</span></span>
<span id="cb13-5"><a href="data-visualization-in-r.html#cb13-5" tabindex="-1"></a>     <span class="at">type =</span> <span class="st">&quot;b&quot;</span>, <span class="co">#b = points and lines</span></span>
<span id="cb13-6"><a href="data-visualization-in-r.html#cb13-6" tabindex="-1"></a>     <span class="at">pch =</span> <span class="dv">19</span>, <span class="co"># symbol shape</span></span>
<span id="cb13-7"><a href="data-visualization-in-r.html#cb13-7" tabindex="-1"></a>     <span class="at">ylab =</span> <span class="st">&quot;Annual fossil fuel emissions (billons of tons CO2)&quot;</span>, <span class="co">#y axis label</span></span>
<span id="cb13-8"><a href="data-visualization-in-r.html#cb13-8" tabindex="-1"></a>     <span class="at">xlab =</span> <span class="st">&quot;Year&quot;</span>, <span class="co">#x axis label</span></span>
<span id="cb13-9"><a href="data-visualization-in-r.html#cb13-9" tabindex="-1"></a>     <span class="at">yaxt =</span> <span class="st">&quot;n&quot;</span>) <span class="co"># turn off y axis</span></span>
<span id="cb13-10"><a href="data-visualization-in-r.html#cb13-10" tabindex="-1"></a><span class="co"># add y axis</span></span>
<span id="cb13-11"><a href="data-visualization-in-r.html#cb13-11" tabindex="-1"></a><span class="co"># arguments are axis number (1 bottom, 2 left, 3 top, 4 right)</span></span>
<span id="cb13-12"><a href="data-visualization-in-r.html#cb13-12" tabindex="-1"></a><span class="co"># las = 2 changes the labels to be read in horizontal direction</span></span>
<span id="cb13-13"><a href="data-visualization-in-r.html#cb13-13" tabindex="-1"></a><span class="fu">axis</span>(<span class="dv">2</span>, <span class="fu">seq</span>(<span class="dv">0</span>,<span class="dv">6000000000</span>, <span class="at">by=</span><span class="dv">2000000000</span>), <span class="co">#location of ticks</span></span>
<span id="cb13-14"><a href="data-visualization-in-r.html#cb13-14" tabindex="-1"></a>     <span class="fu">seq</span>(<span class="dv">0</span>,<span class="dv">6</span>, <span class="at">by =</span> <span class="dv">2</span>), <span class="co"># label for ticks</span></span>
<span id="cb13-15"><a href="data-visualization-in-r.html#cb13-15" tabindex="-1"></a>     <span class="at">las=</span><span class="dv">2</span> )</span>
<span id="cb13-16"><a href="data-visualization-in-r.html#cb13-16" tabindex="-1"></a><span class="co"># add mexico to plot ----</span></span>
<span id="cb13-17"><a href="data-visualization-in-r.html#cb13-17" tabindex="-1"></a><span class="co"># add points</span></span>
<span id="cb13-18"><a href="data-visualization-in-r.html#cb13-18" tabindex="-1"></a><span class="fu">points</span>(ME<span class="sc">$</span>Year, <span class="co"># x data</span></span>
<span id="cb13-19"><a href="data-visualization-in-r.html#cb13-19" tabindex="-1"></a>     ME<span class="sc">$</span>CO2, <span class="co"># y data</span></span>
<span id="cb13-20"><a href="data-visualization-in-r.html#cb13-20" tabindex="-1"></a>     <span class="at">type =</span> <span class="st">&quot;b&quot;</span>, <span class="co">#b = points and lines</span></span>
<span id="cb13-21"><a href="data-visualization-in-r.html#cb13-21" tabindex="-1"></a>     <span class="at">pch =</span> <span class="dv">19</span>, <span class="co"># symbol shape,</span></span>
<span id="cb13-22"><a href="data-visualization-in-r.html#cb13-22" tabindex="-1"></a>     <span class="at">col=</span> <span class="st">&quot;darkgoldenrod3&quot;</span>)</span></code></pre></div>
<p><img src="EnvDataSci_files/figure-html/unnamed-chunk-17-1.png" width="768" /></p>
<p>There are a few last helpful functions in base R plots. You can change the axis range so that it shows more or less values. In this case, slightly increasing the y axis might help add a little space. YHere the <code>xlim</code> and <code>ylim</code> arguments change the range of the axes. These arguments expect a vector of two numbers: <code>ylim = c(minimum value, maximum value)</code>. This tells R the range on the axis to plot. You need to add a legend to properly label the plot. For the <code>legend</code> function, you specify a position for the legend. You can either specify and exact x,y coordinate or you use an argument for a more general position such as: <em>topleft</em>, <em>center</em>, <em>bottomright</em>. The <code>bty</code> argument is related to drawing a box around the legend. Setting that argument to <code>"n"</code> ensures you are rid of such a distracting feature.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="data-visualization-in-r.html#cb14-1" tabindex="-1"></a><span class="co"># make a plot of US CO2 ----</span></span>
<span id="cb14-2"><a href="data-visualization-in-r.html#cb14-2" tabindex="-1"></a></span>
<span id="cb14-3"><a href="data-visualization-in-r.html#cb14-3" tabindex="-1"></a><span class="fu">plot</span>(US<span class="sc">$</span>Year, <span class="co"># x data</span></span>
<span id="cb14-4"><a href="data-visualization-in-r.html#cb14-4" tabindex="-1"></a>     US<span class="sc">$</span>CO2, <span class="co"># y data</span></span>
<span id="cb14-5"><a href="data-visualization-in-r.html#cb14-5" tabindex="-1"></a>     <span class="at">type =</span> <span class="st">&quot;b&quot;</span>, <span class="co">#b = points and lines</span></span>
<span id="cb14-6"><a href="data-visualization-in-r.html#cb14-6" tabindex="-1"></a>     <span class="at">pch =</span> <span class="dv">19</span>, <span class="co"># symbol shape</span></span>
<span id="cb14-7"><a href="data-visualization-in-r.html#cb14-7" tabindex="-1"></a>     <span class="at">ylab =</span> <span class="st">&quot;Annual fossil fuel emissions (billons of tons CO2)&quot;</span>, <span class="co">#y axis label</span></span>
<span id="cb14-8"><a href="data-visualization-in-r.html#cb14-8" tabindex="-1"></a>     <span class="at">xlab =</span> <span class="st">&quot;Year&quot;</span>, <span class="co">#x axis label</span></span>
<span id="cb14-9"><a href="data-visualization-in-r.html#cb14-9" tabindex="-1"></a>     <span class="at">yaxt =</span> <span class="st">&quot;n&quot;</span>, <span class="co"># turn off y axis</span></span>
<span id="cb14-10"><a href="data-visualization-in-r.html#cb14-10" tabindex="-1"></a>     <span class="at">ylim =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">6200000000</span>)) <span class="co"># change y axis range</span></span>
<span id="cb14-11"><a href="data-visualization-in-r.html#cb14-11" tabindex="-1"></a><span class="co"># add y axis</span></span>
<span id="cb14-12"><a href="data-visualization-in-r.html#cb14-12" tabindex="-1"></a><span class="co"># arguments are axis number (1 bottom, 2 left, 3 top, 4 right)</span></span>
<span id="cb14-13"><a href="data-visualization-in-r.html#cb14-13" tabindex="-1"></a><span class="co"># las = 2 changes the labels to be read in horizontal direction</span></span>
<span id="cb14-14"><a href="data-visualization-in-r.html#cb14-14" tabindex="-1"></a><span class="fu">axis</span>(<span class="dv">2</span>, <span class="fu">seq</span>(<span class="dv">0</span>,<span class="dv">6000000000</span>, <span class="at">by=</span><span class="dv">2000000000</span>), <span class="co">#location of ticks</span></span>
<span id="cb14-15"><a href="data-visualization-in-r.html#cb14-15" tabindex="-1"></a>     <span class="fu">seq</span>(<span class="dv">0</span>,<span class="dv">6</span>, <span class="at">by =</span> <span class="dv">2</span>), <span class="co"># label for ticks</span></span>
<span id="cb14-16"><a href="data-visualization-in-r.html#cb14-16" tabindex="-1"></a>     <span class="at">las=</span><span class="dv">2</span> )</span>
<span id="cb14-17"><a href="data-visualization-in-r.html#cb14-17" tabindex="-1"></a><span class="co"># add mexico to plot ----</span></span>
<span id="cb14-18"><a href="data-visualization-in-r.html#cb14-18" tabindex="-1"></a><span class="co"># add points</span></span>
<span id="cb14-19"><a href="data-visualization-in-r.html#cb14-19" tabindex="-1"></a><span class="fu">points</span>(ME<span class="sc">$</span>Year, <span class="co"># x data</span></span>
<span id="cb14-20"><a href="data-visualization-in-r.html#cb14-20" tabindex="-1"></a>     ME<span class="sc">$</span>CO2, <span class="co"># y data</span></span>
<span id="cb14-21"><a href="data-visualization-in-r.html#cb14-21" tabindex="-1"></a>     <span class="at">type =</span> <span class="st">&quot;b&quot;</span>, <span class="co">#b = points and lines</span></span>
<span id="cb14-22"><a href="data-visualization-in-r.html#cb14-22" tabindex="-1"></a>     <span class="at">pch =</span> <span class="dv">19</span>, <span class="co"># symbol shape,</span></span>
<span id="cb14-23"><a href="data-visualization-in-r.html#cb14-23" tabindex="-1"></a>     <span class="at">col=</span> <span class="st">&quot;darkgoldenrod3&quot;</span>)</span>
<span id="cb14-24"><a href="data-visualization-in-r.html#cb14-24" tabindex="-1"></a><span class="fu">legend</span>(<span class="st">&quot;topleft&quot;</span>,</span>
<span id="cb14-25"><a href="data-visualization-in-r.html#cb14-25" tabindex="-1"></a>       <span class="fu">c</span>(<span class="st">&quot;United States&quot;</span>, <span class="st">&quot;Mexico&quot;</span>),</span>
<span id="cb14-26"><a href="data-visualization-in-r.html#cb14-26" tabindex="-1"></a>       <span class="at">col=</span><span class="fu">c</span>(<span class="st">&quot;black&quot;</span>, <span class="st">&quot;darkgoldenrod3&quot;</span>),</span>
<span id="cb14-27"><a href="data-visualization-in-r.html#cb14-27" tabindex="-1"></a>       <span class="at">pch=</span><span class="dv">19</span>, <span class="at">bty=</span> <span class="st">&quot;n&quot;</span>)</span></code></pre></div>
<p><img src="EnvDataSci_files/figure-html/unnamed-chunk-18-1.png" width="768" /></p>
</div>
<div id="plotting-in-ggplot2" class="section level2 hasAnchor" number="4.6">
<h2><span class="header-section-number">4.6</span> Plotting in ggplot2<a href="data-visualization-in-r.html#plotting-in-ggplot2" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="intro-to-ggplot" class="section level3 hasAnchor" number="4.6.1">
<h3><span class="header-section-number">4.6.1</span> <em>Intro to ggplot</em><a href="data-visualization-in-r.html#intro-to-ggplot" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><code>ggplot2</code> is a package that allows for fast, aesthetically tasteful and efficient plots with nicely formatted axes. In only a few lines of code, you can have a high quality graph much quicker than base R. It has built in functions that are useful for a wide range of plots. You will want to install and load ggplot2</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="data-visualization-in-r.html#cb15-1" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;ggplot2&quot;</span>)</span></code></pre></div>
<p>Once the package is installed, you will need to load the package into your current session using the <code>library</code> function.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="data-visualization-in-r.html#cb16-1" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span></code></pre></div>
<p>ggplot2 has developed a different plotting syntax than base R. The language of ggplot2 means that you declare the <strong>data</strong> that you are using, the <strong>coordinate system</strong> (specified via <code>ggplot</code>), and the <strong>geometry</strong> (specified with <code>geom_</code>) to be used in the plot. The <strong>data</strong> refers to the data source and the <strong>aesthetics</strong>. In the <strong>aesthetics</strong> you define the x, y coordinate specifications and any other information on the size or colors to be used. The <strong>coordinate system</strong> specifies how to plot the data graphically. By default it refers to a <strong>cartesian</strong> coordinate system which simply means plotting on a x,y axis. You don’t need to specify this plotting component if you are making a caresian graph. The <strong>geometry</strong> refers to the shapes/type of plot to be used (ex: bars, boxes, points). You can find a cheat sheet for ggplot2 here: <a href="https://github.com/rstudio/cheatsheets/blob/master/data-visualization-2.1.pdf" class="uri">https://github.com/rstudio/cheatsheets/blob/master/data-visualization-2.1.pdf</a></p>
<p>Let’s get a feel for using ggplot by looking at the annual precipitation across years for all of the sites. You’ll notice that ggplot2 also uses <em>+</em> signs to connect multiple functions that specify the coordinates and the geometry in the same plot. This is unique to this type of package and other packages made by the same developers.</p>
<p>Let’s take a look at basic code using the US emissions:</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="data-visualization-in-r.html#cb17-1" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> US, <span class="co"># data for plot</span></span>
<span id="cb17-2"><a href="data-visualization-in-r.html#cb17-2" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> Year, <span class="at">y=</span>CO2 ) )<span class="sc">+</span> <span class="co"># aes, x and y</span></span>
<span id="cb17-3"><a href="data-visualization-in-r.html#cb17-3" tabindex="-1"></a>        <span class="fu">geom_point</span>()<span class="sc">+</span> <span class="co"># make points at data point</span></span>
<span id="cb17-4"><a href="data-visualization-in-r.html#cb17-4" tabindex="-1"></a>        <span class="fu">geom_line</span>()<span class="sc">+</span> <span class="co"># use lines to connect data points</span></span>
<span id="cb17-5"><a href="data-visualization-in-r.html#cb17-5" tabindex="-1"></a>        <span class="fu">labs</span>(<span class="at">x=</span><span class="st">&quot;Year&quot;</span>, <span class="at">y=</span><span class="st">&quot;US fossil fuel emissions (tons CO2)&quot;</span>) <span class="co"># make axis labels</span></span></code></pre></div>
<p><img src="EnvDataSci_files/figure-html/unnamed-chunk-21-1.png" width="672" /></p>
<p>You’ll notice a legend is automatically made and the y axis labels are in the right direction. The style (gridlines, background) can be changed via the theme. <code>theme_classic</code> will make a plain graph. In the cheatsheet, you can see there are other types of themes.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="data-visualization-in-r.html#cb18-1" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> US, <span class="co"># data for plot</span></span>
<span id="cb18-2"><a href="data-visualization-in-r.html#cb18-2" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> Year, <span class="at">y=</span>CO2 ) )<span class="sc">+</span> <span class="co"># aes, x and y</span></span>
<span id="cb18-3"><a href="data-visualization-in-r.html#cb18-3" tabindex="-1"></a>        <span class="fu">geom_point</span>()<span class="sc">+</span> <span class="co"># make points at data point</span></span>
<span id="cb18-4"><a href="data-visualization-in-r.html#cb18-4" tabindex="-1"></a>        <span class="fu">geom_line</span>()<span class="sc">+</span> <span class="co"># use lines to connect data points</span></span>
<span id="cb18-5"><a href="data-visualization-in-r.html#cb18-5" tabindex="-1"></a>        <span class="fu">labs</span>(<span class="at">x=</span><span class="st">&quot;Year&quot;</span>, <span class="at">y=</span><span class="st">&quot;US fossil fuel emissions (tons CO2)&quot;</span>)<span class="sc">+</span> <span class="co">#axis labels</span></span>
<span id="cb18-6"><a href="data-visualization-in-r.html#cb18-6" tabindex="-1"></a>  <span class="fu">theme_classic</span>()</span></code></pre></div>
<p><img src="EnvDataSci_files/figure-html/unnamed-chunk-22-1.png" width="672" /></p>
<p>You can also show many different groups with different encoding. The color argument in ggplot allows you to specify groupings that should have different colors displayed. Lets make a North America emissions data frame and inspect this closely:</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="data-visualization-in-r.html#cb19-1" tabindex="-1"></a><span class="co"># subset data for just</span></span>
<span id="cb19-2"><a href="data-visualization-in-r.html#cb19-2" tabindex="-1"></a>NorthA <span class="ot">&lt;-</span> datCO2[datCO2<span class="sc">$</span>Entity <span class="sc">==</span> <span class="st">&quot;United States&quot;</span> <span class="sc">|</span></span>
<span id="cb19-3"><a href="data-visualization-in-r.html#cb19-3" tabindex="-1"></a>                   datCO2<span class="sc">$</span>Entity <span class="sc">==</span> <span class="st">&quot;Canada&quot;</span> <span class="sc">|</span></span>
<span id="cb19-4"><a href="data-visualization-in-r.html#cb19-4" tabindex="-1"></a>                   datCO2<span class="sc">$</span>Entity <span class="sc">==</span> <span class="st">&quot;Mexico&quot;</span>, ]</span>
<span id="cb19-5"><a href="data-visualization-in-r.html#cb19-5" tabindex="-1"></a></span>
<span id="cb19-6"><a href="data-visualization-in-r.html#cb19-6" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> NorthA, <span class="co"># data for plot</span></span>
<span id="cb19-7"><a href="data-visualization-in-r.html#cb19-7" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> Year, <span class="at">y=</span>CO2, <span class="at">color=</span>Entity ) )<span class="sc">+</span> <span class="co"># aes, x and y</span></span>
<span id="cb19-8"><a href="data-visualization-in-r.html#cb19-8" tabindex="-1"></a>  <span class="fu">geom_point</span>()<span class="sc">+</span> <span class="co"># make points at data point</span></span>
<span id="cb19-9"><a href="data-visualization-in-r.html#cb19-9" tabindex="-1"></a>  <span class="fu">geom_line</span>()<span class="sc">+</span> <span class="co"># use lines to connect data points</span></span>
<span id="cb19-10"><a href="data-visualization-in-r.html#cb19-10" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x=</span><span class="st">&quot;Year&quot;</span>, <span class="at">y=</span><span class="st">&quot;US fossil fuel emissions (tons CO2)&quot;</span>)<span class="sc">+</span> <span class="co"># make axis labels</span></span>
<span id="cb19-11"><a href="data-visualization-in-r.html#cb19-11" tabindex="-1"></a>  <span class="fu">theme_classic</span>()</span></code></pre></div>
<p><img src="EnvDataSci_files/figure-html/unnamed-chunk-23-1.png" width="672" /></p>
</div>
<div id="changing-colors" class="section level3 hasAnchor" number="4.6.2">
<h3><span class="header-section-number">4.6.2</span> <em>Changing colors</em><a href="data-visualization-in-r.html#changing-colors" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>It also would be helpful to change the colors and make them semi-transparent so we can see what sites overlap a little better. You can manually change the colors in Rstudio using the <em>scale_color_manual</em> setting. Note in R, you can enter colors as color names: such as <em>“tomato3”</em>, the hex code, or you can use the rgb() function to designate the amount of red, green, and blue that goes into making a color. There are a lot of color resources online that can help you pick colors. If you search for the color <em>tomato3</em> in google, you will get results from color websites that give the hex codes or the red,green, blue composition. In the case of <em>tomato3</em>, the hex code is <em>#CD4F39</em> and the red, green, blue composition is rgb(0.8, 0.31,0.22). You can find more information on color theory and colors in R here: <a href="https://www.nceas.ucsb.edu/sites/default/files/2020-04/colorPaletteCheatsheet.pdf" class="uri">https://www.nceas.ucsb.edu/sites/default/files/2020-04/colorPaletteCheatsheet.pdf</a></p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="data-visualization-in-r.html#cb20-1" tabindex="-1"></a><span class="co"># subset data for just</span></span>
<span id="cb20-2"><a href="data-visualization-in-r.html#cb20-2" tabindex="-1"></a>NorthA <span class="ot">&lt;-</span> datCO2[datCO2<span class="sc">$</span>Entity <span class="sc">==</span> <span class="st">&quot;United States&quot;</span> <span class="sc">|</span></span>
<span id="cb20-3"><a href="data-visualization-in-r.html#cb20-3" tabindex="-1"></a>                   datCO2<span class="sc">$</span>Entity <span class="sc">==</span> <span class="st">&quot;Canada&quot;</span> <span class="sc">|</span></span>
<span id="cb20-4"><a href="data-visualization-in-r.html#cb20-4" tabindex="-1"></a>                   datCO2<span class="sc">$</span>Entity <span class="sc">==</span> <span class="st">&quot;Mexico&quot;</span>, ]</span>
<span id="cb20-5"><a href="data-visualization-in-r.html#cb20-5" tabindex="-1"></a></span>
<span id="cb20-6"><a href="data-visualization-in-r.html#cb20-6" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> NorthA, <span class="co"># data for plot</span></span>
<span id="cb20-7"><a href="data-visualization-in-r.html#cb20-7" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> Year, <span class="at">y=</span>CO2, <span class="at">color=</span>Entity ) )<span class="sc">+</span> <span class="co"># aes, x and y</span></span>
<span id="cb20-8"><a href="data-visualization-in-r.html#cb20-8" tabindex="-1"></a>  <span class="fu">geom_point</span>()<span class="sc">+</span> <span class="co"># make points at data point</span></span>
<span id="cb20-9"><a href="data-visualization-in-r.html#cb20-9" tabindex="-1"></a>  <span class="fu">geom_line</span>()<span class="sc">+</span> <span class="co"># use lines to connect data points</span></span>
<span id="cb20-10"><a href="data-visualization-in-r.html#cb20-10" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x=</span><span class="st">&quot;Year&quot;</span>, <span class="at">y=</span><span class="st">&quot;US fossil fuel emissions (tons CO2)&quot;</span>)<span class="sc">+</span> <span class="co"># make axis labels</span></span>
<span id="cb20-11"><a href="data-visualization-in-r.html#cb20-11" tabindex="-1"></a>  <span class="fu">theme_classic</span>()<span class="sc">+</span></span>
<span id="cb20-12"><a href="data-visualization-in-r.html#cb20-12" tabindex="-1"></a>        <span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;#7FB3D555&quot;</span>,<span class="st">&quot;#34495E55&quot;</span>, <span class="st">&quot;#E7B80055&quot;</span>)) <span class="co">#specify colors using hex codes that include transparency</span></span></code></pre></div>
<p><img src="EnvDataSci_files/figure-html/unnamed-chunk-24-1.png" width="672" /></p>
</div>
<div id="exploring-different-visualizations-in-ggplot2" class="section level3 hasAnchor" number="4.6.3">
<h3><span class="header-section-number">4.6.3</span> Exploring different visualizations in ggplot2<a href="data-visualization-in-r.html#exploring-different-visualizations-in-ggplot2" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>One of the largest considerations in data visualizations is using the proper type of geometry to display data. Let’s look at making different types of plots in ggplot2.</p>
</div>
<div id="violin-and-box-plots" class="section level3 hasAnchor" number="4.6.4">
<h3><span class="header-section-number">4.6.4</span> <em>Violin and box plots</em><a href="data-visualization-in-r.html#violin-and-box-plots" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Violin plots are a way to display data across categories in a manner that conveys more information than a barplot of means. The violins are created using a mirrored histogram of the data that is smoothed out into a line. Each distribution is displayed around the name with wider parts of the violin representing values on the y axis that occur more frequently within a group. Typically violins are paired with a boxplot in the violin to show the quartiles, median, and 95% range within the distribution. In ggplot2, violin plots are easy to make. Let’s focus on minimum temperatures for this next part. Let’s take a look at the annual emissions across three countries India, France, and Russia since 1950. Here you simpily want to look at the range of emissions in each country rather than think about temporal trends.</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="data-visualization-in-r.html#cb21-1" tabindex="-1"></a><span class="co"># subset CO2 to meet conditons</span></span>
<span id="cb21-2"><a href="data-visualization-in-r.html#cb21-2" tabindex="-1"></a>compCO2 <span class="ot">&lt;-</span> datCO2[datCO2<span class="sc">$</span>Year <span class="sc">&gt;=</span> <span class="dv">1950</span> <span class="sc">&amp;</span> datCO2<span class="sc">$</span>Entity <span class="sc">==</span> <span class="st">&quot;France&quot;</span> <span class="sc">|</span></span>
<span id="cb21-3"><a href="data-visualization-in-r.html#cb21-3" tabindex="-1"></a>                    datCO2<span class="sc">$</span>Year <span class="sc">&gt;=</span> <span class="dv">1950</span> <span class="sc">&amp;</span> datCO2<span class="sc">$</span>Entity <span class="sc">==</span> <span class="st">&quot;India&quot;</span> <span class="sc">|</span></span>
<span id="cb21-4"><a href="data-visualization-in-r.html#cb21-4" tabindex="-1"></a>                    datCO2<span class="sc">$</span>Year <span class="sc">&gt;=</span> <span class="dv">1950</span> <span class="sc">&amp;</span>  datCO2<span class="sc">$</span>Entity <span class="sc">==</span> <span class="st">&quot;Russia&quot;</span> , ]</span>
<span id="cb21-5"><a href="data-visualization-in-r.html#cb21-5" tabindex="-1"></a></span>
<span id="cb21-6"><a href="data-visualization-in-r.html#cb21-6" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> compCO2 , <span class="fu">aes</span>(<span class="at">x=</span>Entity, <span class="at">y=</span>CO2))<span class="sc">+</span> <span class="co"># look at CO2 by country</span></span>
<span id="cb21-7"><a href="data-visualization-in-r.html#cb21-7" tabindex="-1"></a>  <span class="fu">geom_violin</span>(<span class="at">fill=</span><span class="fu">rgb</span>(<span class="fl">0.933</span>,<span class="fl">0.953</span>,<span class="fl">0.98</span>))<span class="sc">+</span> <span class="co"># add a violin plot with blue color</span></span>
<span id="cb21-8"><a href="data-visualization-in-r.html#cb21-8" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="at">width=</span><span class="fl">0.03</span>,<span class="at">size=</span><span class="fl">0.15</span>, <span class="at">fill=</span><span class="st">&quot;grey90&quot;</span>)<span class="sc">+</span> <span class="co"># add grey </span></span>
<span id="cb21-9"><a href="data-visualization-in-r.html#cb21-9" tabindex="-1"></a>  <span class="co">#boxplots and make them smaller to fit in the violin (width)</span></span>
<span id="cb21-10"><a href="data-visualization-in-r.html#cb21-10" tabindex="-1"></a>  <span class="co">#than normal with thinner lines (size_ than normal</span></span>
<span id="cb21-11"><a href="data-visualization-in-r.html#cb21-11" tabindex="-1"></a>  <span class="fu">theme_classic</span>()<span class="sc">+</span> <span class="co"># get rid of ugly gridlines</span></span>
<span id="cb21-12"><a href="data-visualization-in-r.html#cb21-12" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;Country&quot;</span>, <span class="at">y=</span><span class="st">&quot;Annual emissions (tons CO2)&quot;</span>)</span></code></pre></div>
<p><img src="EnvDataSci_files/figure-html/unnamed-chunk-25-1.png" width="1056" /></p>
</div>
<div id="area-and-ribbon-plots" class="section level3 hasAnchor" number="4.6.5">
<h3><span class="header-section-number">4.6.5</span> <em>Area and ribbon plots</em><a href="data-visualization-in-r.html#area-and-ribbon-plots" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>It can often be helpful to view line graphs with area under the data to help convey the magnitude of the of the data. A <strong>area</strong> geometry can help visualize the cumulative values between multiple lines. Let’s see the impact on three countries with very different trajectories in recent decades. Let’s focus on France, India and Russia since 1950.</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="data-visualization-in-r.html#cb22-1" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>compCO2, <span class="fu">aes</span>(<span class="at">x=</span>Year, <span class="at">y=</span>CO2, <span class="at">fill=</span>Entity))<span class="sc">+</span> <span class="co"># data</span></span>
<span id="cb22-2"><a href="data-visualization-in-r.html#cb22-2" tabindex="-1"></a>  <span class="fu">geom_area</span>() <span class="co"># geometry</span></span></code></pre></div>
<p><img src="EnvDataSci_files/figure-html/unnamed-chunk-26-1.png" width="672" /></p>
<p>A <strong>ribbon</strong> geometry simply shows the area between a minimum and maximum y value. This will not be cumulative. In this case, it would be helpful to visualize how far above zero the emissions are. Extending the area under the line can help visualize how much each country varies from zero. Given the ribbons for three countries are likely to overlap, it is a good idea to add transparency using the <code>alpha</code> function. If you look up the documentations on <code>geom_ribbon</code>, you will find more than one y argument is needed. You need to specify to start of the ribbon (<code>ymin</code>) and the upper value (<code>ymax</code>). You can set a single value. In this case, let’s shade the area from zero to the annual emissions.</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="data-visualization-in-r.html#cb23-1" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>compCO2,</span>
<span id="cb23-2"><a href="data-visualization-in-r.html#cb23-2" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x=</span>Year, <span class="at">ymin=</span><span class="dv">0</span>, <span class="at">ymax=</span>CO2, <span class="at">fill=</span>Entity))<span class="sc">+</span> <span class="co">#fill works for polygons/shaded areas </span></span>
<span id="cb23-3"><a href="data-visualization-in-r.html#cb23-3" tabindex="-1"></a>  <span class="fu">geom_ribbon</span>(<span class="at">alpha=</span><span class="fl">0.5</span> )<span class="sc">+</span> <span class="co">#fill in with 50% transparency</span></span>
<span id="cb23-4"><a href="data-visualization-in-r.html#cb23-4" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x=</span><span class="st">&quot;Year&quot;</span>, <span class="at">y=</span><span class="st">&quot;Annual emissions (tons CO2)&quot;</span>)</span></code></pre></div>
<p><img src="EnvDataSci_files/figure-html/unnamed-chunk-27-1.png" width="672" /></p>
</div>
<div id="labels" class="section level3 hasAnchor" number="4.6.6">
<h3><span class="header-section-number">4.6.6</span> <em>Labels</em><a href="data-visualization-in-r.html#labels" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>A striking pattern sticks out in the Russia fossil fuel emissions. Visually, it looks like a large drop in emissions corresponds with the end of the soviet union. You think a label would be useful for your audience for the context. Let’s take a closer look at adding individual or limited amounts of labels (not labeling every point because that is rarely useful). The function <code>annotate</code> allows you to add label lines, label text, and even polygons that can draw attention to an area. The first argument of the function <code>geom</code> allows you to specify a <code>"segment"</code> (line), <code>"text</code> (characters to add), and <code>"rect"</code> (rectangular polygon). Let’s add both the text and a line for a label that marks the end of the USSR in 1991. Although the dissolution started several years prior before 1991, for simplicity we will designate the final year.</p>
<p>A helpful feature of ggplot is that you can name a graph and refer to it later. This can be helpful for keeping your plot code easy to read. Let’s start with the ribbon graph as a base and add more labelling:</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="data-visualization-in-r.html#cb24-1" tabindex="-1"></a>b <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data=</span>compCO2,<span class="fu">aes</span>(<span class="at">x=</span>Year, <span class="at">ymin=</span><span class="dv">0</span>, <span class="at">ymax=</span>CO2, <span class="at">fill=</span>Entity))<span class="sc">+</span></span>
<span id="cb24-2"><a href="data-visualization-in-r.html#cb24-2" tabindex="-1"></a>  <span class="fu">geom_ribbon</span>(<span class="at">alpha=</span><span class="fl">0.5</span> )<span class="sc">+</span></span>
<span id="cb24-3"><a href="data-visualization-in-r.html#cb24-3" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x=</span><span class="st">&quot;Year&quot;</span>, <span class="at">y=</span><span class="st">&quot;Carbon emissions (tons CO2)&quot;</span>) <span class="sc">+</span></span>
<span id="cb24-4"><a href="data-visualization-in-r.html#cb24-4" tabindex="-1"></a>  <span class="fu">theme_classic</span>()</span></code></pre></div>
<p>Next let’s add the label with the line and text:</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="data-visualization-in-r.html#cb25-1" tabindex="-1"></a>b <span class="sc">+</span> <span class="fu">annotate</span>(<span class="st">&quot;segment&quot;</span>, <span class="co"># line label</span></span>
<span id="cb25-2"><a href="data-visualization-in-r.html#cb25-2" tabindex="-1"></a>             <span class="at">x=</span><span class="dv">1991</span>, <span class="co"># start x coordinate</span></span>
<span id="cb25-3"><a href="data-visualization-in-r.html#cb25-3" tabindex="-1"></a>             <span class="at">y=</span><span class="dv">2450000000</span>, <span class="co"># start y coordinate</span></span>
<span id="cb25-4"><a href="data-visualization-in-r.html#cb25-4" tabindex="-1"></a>             <span class="at">xend=</span><span class="dv">1991</span>, <span class="co"># end x coordinate</span></span>
<span id="cb25-5"><a href="data-visualization-in-r.html#cb25-5" tabindex="-1"></a>             <span class="at">yend=</span><span class="dv">2600000000</span>) <span class="sc">+</span> <span class="co"># end y coordinate</span></span>
<span id="cb25-6"><a href="data-visualization-in-r.html#cb25-6" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="st">&quot;text&quot;</span>, <span class="co"># add text label</span></span>
<span id="cb25-7"><a href="data-visualization-in-r.html#cb25-7" tabindex="-1"></a>           <span class="at">x=</span><span class="dv">1991</span>, <span class="co"># center of label x coordinate</span></span>
<span id="cb25-8"><a href="data-visualization-in-r.html#cb25-8" tabindex="-1"></a>           <span class="at">y=</span> <span class="dv">2700000000</span>, <span class="co"># center of label y coordinate</span></span>
<span id="cb25-9"><a href="data-visualization-in-r.html#cb25-9" tabindex="-1"></a>           <span class="at">label=</span><span class="st">&quot;end of USSR&quot;</span>) <span class="co"># label to add</span></span></code></pre></div>
<p><img src="EnvDataSci_files/figure-html/unnamed-chunk-29-1.png" width="672" /></p>
<p>There are too many different types of plots in ggplot to review everything in this tutorial. Once you are used to the format of arguments of ggplot, you can explore the many other types of geometries and features.</p>
<p>A final note about ggplot is that there are philosophies about data visualization and data organization that impact your plotting capabilities. ggplot does not allow for multiple y axes and data is best formatted in long form where all x and y observations in one column and a third column that gives a label for different groups if additional encoding is to be used.</p>
</div>
</div>
<div id="conclusions" class="section level2 hasAnchor" number="4.7">
<h2><span class="header-section-number">4.7</span> Conclusions<a href="data-visualization-in-r.html#conclusions" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>You can see from the tutorial that visualization can be a key part of communicating climate change. The visualizations in the tutorial highlight the non-linear increase in CO<sub>2</sub> emissions since the mid 20<sup>th</sup> century. Emissions have started to decline in recent years in some countries, but overall emission levels remain high and vary by country. You can see how your visualizations present different stories about emissions data. Ribbon and line plots show trends of increasing and decreasing emissions over time for different countries. An area plot shows cumulative emissions with countries contributing different proportions over time. A violin plot helps compare the spread of emission levels between different countries. The reduction in emissions is the main focus of international policy and global reductions in emissions is the goal of many agreements. Visualizations of emissions over time help chart out the magnitude and trends of continued contributions to anthropogenic climate change that will be seen in future global temperatures.</p>
</div>
<div id="citations-1" class="section level2 hasAnchor" number="4.8">
<h2><span class="header-section-number">4.8</span> Citations<a href="data-visualization-in-r.html#citations-1" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Mann, Michael E., Raymond S. Bradley, and Malcolm K. Hughes. “Northern hemisphere temperatures during the past millennium: Inferences, uncertainties, and limitations.” Geophysical research letters 26.6 (1999): 759-762.</p>
<p>Data from Global Carbon Budget - Global Carbon Project (2021) Via <em>Our World in Data</em>. Novemeber 2021.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="the-data-deluge-data-wrangling-in-r.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
